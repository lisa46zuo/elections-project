<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Lisa Zuo" />

<meta name="date" content="2020-11-10" />

<title>Using Classification Algorithms to Predict Income</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Using Classification Algorithms to Predict Income</h1>
<h4 class="author">Lisa Zuo</h4>
<h4 class="date">November 10, 2020</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Classification algorithms are a machine learning technique that tries to classify data based on training sets. Unlike cluster analysis, which tries to group data points into a specified number of clusters, classification algorithms predict which category observations belong in. Classification algorithms are a type of supervised machine learning since the data scientist first uses a dataset with known categories to “train” the computer to recognize patterns in the data.</p>
<p>One standard method of supervised machine learning is the <a href="https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm">k-NN method</a>, or k-nearest neighbors method. This is a type of classification algorithm that classifies data based on the nearest neighbor. The k-NN algorithm can be used in R on datasets with numeric data.</p>
<p>In this deliverable, we will use a dataset from the <a href="http://archive.ics.uci.edu/ml/datasets.php">UCI Machine Learning Repository</a> that contains data on adult employment and income. The prediction task is to predict whether a person’s income is above or below $50,000. The dataset contains information about each adult’s age, work class (self-employed, government employee, etc.), education, marital status, occupation, relationship with family, race, sex, capital gain or loss, hours worked per week, and native country.</p>
</div>
<div id="methods" class="section level2">
<h2>Methods</h2>
<div id="data-cleaning" class="section level3">
<h3>Data cleaning</h3>
<p>When we first load in the data, there are no headers, and variables are multiple data types:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">data &lt;-<span class="st">  </span><span class="kw">read.csv</span>(<span class="st">&quot;adult_data.csv&quot;</span>,  <span class="dt">na.strings=</span><span class="st">&quot;?&quot;</span>, <span class="dt">header=</span>F)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(data))</a></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="2%"></col>
<col width="12%"></col>
<col width="5%"></col>
<col width="7%"></col>
<col width="2%"></col>
<col width="13%"></col>
<col width="13%"></col>
<col width="10%"></col>
<col width="4%"></col>
<col width="5%"></col>
<col width="3%"></col>
<col width="2%"></col>
<col width="2%"></col>
<col width="10%"></col>
<col width="4%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="right">V1</th>
<th align="left">V2</th>
<th align="right">V3</th>
<th align="left">V4</th>
<th align="right">V5</th>
<th align="left">V6</th>
<th align="left">V7</th>
<th align="left">V8</th>
<th align="left">V9</th>
<th align="left">V10</th>
<th align="right">V11</th>
<th align="right">V12</th>
<th align="right">V13</th>
<th align="left">V14</th>
<th align="left">V15</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">39</td>
<td align="left">State-gov</td>
<td align="right">77516</td>
<td align="left">Bachelors</td>
<td align="right">13</td>
<td align="left">Never-married</td>
<td align="left">Adm-clerical</td>
<td align="left">Not-in-family</td>
<td align="left">White</td>
<td align="left">Male</td>
<td align="right">2174</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="even">
<td align="right">50</td>
<td align="left">Self-emp-not-inc</td>
<td align="right">83311</td>
<td align="left">Bachelors</td>
<td align="right">13</td>
<td align="left">Married-civ-spouse</td>
<td align="left">Exec-managerial</td>
<td align="left">Husband</td>
<td align="left">White</td>
<td align="left">Male</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="odd">
<td align="right">38</td>
<td align="left">Private</td>
<td align="right">215646</td>
<td align="left">HS-grad</td>
<td align="right">9</td>
<td align="left">Divorced</td>
<td align="left">Handlers-cleaners</td>
<td align="left">Not-in-family</td>
<td align="left">White</td>
<td align="left">Male</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="even">
<td align="right">53</td>
<td align="left">Private</td>
<td align="right">234721</td>
<td align="left">11th</td>
<td align="right">7</td>
<td align="left">Married-civ-spouse</td>
<td align="left">Handlers-cleaners</td>
<td align="left">Husband</td>
<td align="left">Black</td>
<td align="left">Male</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="odd">
<td align="right">28</td>
<td align="left">Private</td>
<td align="right">338409</td>
<td align="left">Bachelors</td>
<td align="right">13</td>
<td align="left">Married-civ-spouse</td>
<td align="left">Prof-specialty</td>
<td align="left">Wife</td>
<td align="left">Black</td>
<td align="left">Female</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">Cuba</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="even">
<td align="right">37</td>
<td align="left">Private</td>
<td align="right">284582</td>
<td align="left">Masters</td>
<td align="right">14</td>
<td align="left">Married-civ-spouse</td>
<td align="left">Exec-managerial</td>
<td align="left">Wife</td>
<td align="left">White</td>
<td align="left">Female</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">str</span>(data)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; 'data.frame':    32561 obs. of  15 variables:</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt;  $ V1 : int  39 50 38 53 28 37 49 52 31 42 ...</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;  $ V2 : chr  &quot; State-gov&quot; &quot; Self-emp-not-inc&quot; &quot; Private&quot; &quot; Private&quot; ...</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;  $ V3 : int  77516 83311 215646 234721 338409 284582 160187 209642 45781 159449 ...</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;  $ V4 : chr  &quot; Bachelors&quot; &quot; Bachelors&quot; &quot; HS-grad&quot; &quot; 11th&quot; ...</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;  $ V5 : int  13 13 9 7 13 14 5 9 14 13 ...</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;  $ V6 : chr  &quot; Never-married&quot; &quot; Married-civ-spouse&quot; &quot; Divorced&quot; &quot; Married-civ-spouse&quot; ...</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;  $ V7 : chr  &quot; Adm-clerical&quot; &quot; Exec-managerial&quot; &quot; Handlers-cleaners&quot; &quot; Handlers-cleaners&quot; ...</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  $ V8 : chr  &quot; Not-in-family&quot; &quot; Husband&quot; &quot; Not-in-family&quot; &quot; Husband&quot; ...</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  $ V9 : chr  &quot; White&quot; &quot; White&quot; &quot; White&quot; &quot; Black&quot; ...</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  $ V10: chr  &quot; Male&quot; &quot; Male&quot; &quot; Male&quot; &quot; Male&quot; ...</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  $ V11: int  2174 0 0 0 0 0 0 0 14084 5178 ...</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  $ V12: int  0 0 0 0 0 0 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  $ V13: int  40 13 40 40 40 40 16 45 50 40 ...</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  $ V14: chr  &quot; United-States&quot; &quot; United-States&quot; &quot; United-States&quot; &quot; United-States&quot; ...</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  $ V15: chr  &quot; &lt;=50K&quot; &quot; &lt;=50K&quot; &quot; &lt;=50K&quot; &quot; &lt;=50K&quot; ...</span></a></code></pre></div>
<p>In order to prepare the dataset for machine learning, we will add column names and change data types of each column. Here is adding the column names:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># add column names</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">names</span>(data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;workclass&quot;</span>, <span class="st">&quot;fnlwgt&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;education_num&quot;</span>, <span class="st">&quot;marital_status&quot;</span>, <span class="st">&quot;occupation&quot;</span>, <span class="st">&quot;relationship&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;capital_gain&quot;</span>, <span class="st">&quot;capital_loss&quot;</span>, <span class="st">&quot;hours_week&quot;</span>, <span class="st">&quot;native_country&quot;</span>, <span class="st">&quot;income&quot;</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(data, <span class="dv">5</span>))</a></code></pre></div>
<table>
<colgroup>
<col width="2%"></col>
<col width="9%"></col>
<col width="4%"></col>
<col width="5%"></col>
<col width="8%"></col>
<col width="10%"></col>
<col width="10%"></col>
<col width="8%"></col>
<col width="3%"></col>
<col width="4%"></col>
<col width="7%"></col>
<col width="7%"></col>
<col width="6%"></col>
<col width="8%"></col>
<col width="4%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="right">age</th>
<th align="left">workclass</th>
<th align="right">fnlwgt</th>
<th align="left">education</th>
<th align="right">education_num</th>
<th align="left">marital_status</th>
<th align="left">occupation</th>
<th align="left">relationship</th>
<th align="left">race</th>
<th align="left">sex</th>
<th align="right">capital_gain</th>
<th align="right">capital_loss</th>
<th align="right">hours_week</th>
<th align="left">native_country</th>
<th align="left">income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">39</td>
<td align="left">State-gov</td>
<td align="right">77516</td>
<td align="left">Bachelors</td>
<td align="right">13</td>
<td align="left">Never-married</td>
<td align="left">Adm-clerical</td>
<td align="left">Not-in-family</td>
<td align="left">White</td>
<td align="left">Male</td>
<td align="right">2174</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="even">
<td align="right">50</td>
<td align="left">Self-emp-not-inc</td>
<td align="right">83311</td>
<td align="left">Bachelors</td>
<td align="right">13</td>
<td align="left">Married-civ-spouse</td>
<td align="left">Exec-managerial</td>
<td align="left">Husband</td>
<td align="left">White</td>
<td align="left">Male</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="odd">
<td align="right">38</td>
<td align="left">Private</td>
<td align="right">215646</td>
<td align="left">HS-grad</td>
<td align="right">9</td>
<td align="left">Divorced</td>
<td align="left">Handlers-cleaners</td>
<td align="left">Not-in-family</td>
<td align="left">White</td>
<td align="left">Male</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="even">
<td align="right">53</td>
<td align="left">Private</td>
<td align="right">234721</td>
<td align="left">11th</td>
<td align="right">7</td>
<td align="left">Married-civ-spouse</td>
<td align="left">Handlers-cleaners</td>
<td align="left">Husband</td>
<td align="left">Black</td>
<td align="left">Male</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">United-States</td>
<td align="left">&lt;=50K</td>
</tr>
<tr class="odd">
<td align="right">28</td>
<td align="left">Private</td>
<td align="right">338409</td>
<td align="left">Bachelors</td>
<td align="right">13</td>
<td align="left">Married-civ-spouse</td>
<td align="left">Prof-specialty</td>
<td align="left">Wife</td>
<td align="left">Black</td>
<td align="left">Female</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="left">Cuba</td>
<td align="left">&lt;=50K</td>
</tr>
</tbody>
</table>
<p>To prepare the data for machine learning, first we will prepare the income column, which we are trying to use machine learning to predict. Values of &quot; &lt;=50K&quot; will be changed to “1” and &quot; &gt;50K&quot; will be changed to “2”. Then these two will be converted to numeric.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># change income from &lt;=50K and &gt;50K to 1 and 2</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">data<span class="op">$</span>income &lt;-<span class="st"> </span><span class="kw">str_replace</span>(data<span class="op">$</span>income, <span class="st">&quot; &lt;=50K&quot;</span>, <span class="st">&quot;1&quot;</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">data<span class="op">$</span>income &lt;-<span class="st"> </span><span class="kw">str_replace</span>(data<span class="op">$</span>income, <span class="st">&quot; &gt;50K&quot;</span>, <span class="st">&quot;2&quot;</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">data<span class="op">$</span>income &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>income)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">str</span>(data<span class="op">$</span>income)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;  num [1:32561] 1 1 1 1 1 1 1 2 2 2 ...</span></a></code></pre></div>
<p>Now the other columns need to be changed to the numeric data type for the classification algorithm to work:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># convert character to factor to numeric</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">str</span>(data)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; 'data.frame':    32561 obs. of  15 variables:</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;  $ age           : int  39 50 38 53 28 37 49 52 31 42 ...</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;  $ workclass     : chr  &quot; State-gov&quot; &quot; Self-emp-not-inc&quot; &quot; Private&quot; &quot; Private&quot; ...</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;  $ fnlwgt        : int  77516 83311 215646 234721 338409 284582 160187 209642 45781 159449 ...</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt;  $ education     : chr  &quot; Bachelors&quot; &quot; Bachelors&quot; &quot; HS-grad&quot; &quot; 11th&quot; ...</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;  $ education_num : int  13 13 9 7 13 14 5 9 14 13 ...</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;  $ marital_status: chr  &quot; Never-married&quot; &quot; Married-civ-spouse&quot; &quot; Divorced&quot; &quot; Married-civ-spouse&quot; ...</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;  $ occupation    : chr  &quot; Adm-clerical&quot; &quot; Exec-managerial&quot; &quot; Handlers-cleaners&quot; &quot; Handlers-cleaners&quot; ...</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;  $ relationship  : chr  &quot; Not-in-family&quot; &quot; Husband&quot; &quot; Not-in-family&quot; &quot; Husband&quot; ...</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;  $ race          : chr  &quot; White&quot; &quot; White&quot; &quot; White&quot; &quot; Black&quot; ...</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;  $ sex           : chr  &quot; Male&quot; &quot; Male&quot; &quot; Male&quot; &quot; Male&quot; ...</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt;  $ capital_gain  : int  2174 0 0 0 0 0 0 0 14084 5178 ...</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt;  $ capital_loss  : int  0 0 0 0 0 0 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt;  $ hours_week    : int  40 13 40 40 40 40 16 45 50 40 ...</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt;  $ native_country: chr  &quot; United-States&quot; &quot; United-States&quot; &quot; United-States&quot; &quot; United-States&quot; ...</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt;  $ income        : num  1 1 1 1 1 1 1 2 2 2 ...</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co"># character to factor</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22">data<span class="op">$</span>workclass &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>workclass)</a>
<a class="sourceLine" id="cb5-23" data-line-number="23">data<span class="op">$</span>education &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>education)</a>
<a class="sourceLine" id="cb5-24" data-line-number="24">data<span class="op">$</span>marital_status &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>marital_status)</a>
<a class="sourceLine" id="cb5-25" data-line-number="25">data<span class="op">$</span>occupation &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>occupation)</a>
<a class="sourceLine" id="cb5-26" data-line-number="26">data<span class="op">$</span>relationship &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>relationship)</a>
<a class="sourceLine" id="cb5-27" data-line-number="27">data<span class="op">$</span>race &lt;-<span class="st">  </span><span class="kw">as.factor</span>(data<span class="op">$</span>race)</a>
<a class="sourceLine" id="cb5-28" data-line-number="28">data<span class="op">$</span>sex &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb5-29" data-line-number="29">data<span class="op">$</span>native_country &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>native_country)</a>
<a class="sourceLine" id="cb5-30" data-line-number="30"></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co"># factor/int to numeric</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32">data<span class="op">$</span>age &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>age)</a>
<a class="sourceLine" id="cb5-33" data-line-number="33">data<span class="op">$</span>workclass &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>workclass)</a>
<a class="sourceLine" id="cb5-34" data-line-number="34">data<span class="op">$</span>fnlwgt &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>fnlwgt)</a>
<a class="sourceLine" id="cb5-35" data-line-number="35">data<span class="op">$</span>education &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>education)</a>
<a class="sourceLine" id="cb5-36" data-line-number="36">data<span class="op">$</span>education_num &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>education_num)</a>
<a class="sourceLine" id="cb5-37" data-line-number="37">data<span class="op">$</span>marital_status &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>marital_status)</a>
<a class="sourceLine" id="cb5-38" data-line-number="38">data<span class="op">$</span>occupation &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>occupation)</a>
<a class="sourceLine" id="cb5-39" data-line-number="39">data<span class="op">$</span>relationship &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>relationship)</a>
<a class="sourceLine" id="cb5-40" data-line-number="40">data<span class="op">$</span>race &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>race)</a>
<a class="sourceLine" id="cb5-41" data-line-number="41">data<span class="op">$</span>sex &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>sex)</a>
<a class="sourceLine" id="cb5-42" data-line-number="42">data<span class="op">$</span>capital_gain &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>capital_gain)</a>
<a class="sourceLine" id="cb5-43" data-line-number="43">data<span class="op">$</span>capital_loss &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>capital_loss)</a>
<a class="sourceLine" id="cb5-44" data-line-number="44">data<span class="op">$</span>hours_week &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>hours_week)</a>
<a class="sourceLine" id="cb5-45" data-line-number="45">data<span class="op">$</span>native_country &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>native_country)</a>
<a class="sourceLine" id="cb5-46" data-line-number="46">data<span class="op">$</span>income &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data<span class="op">$</span>income)</a>
<a class="sourceLine" id="cb5-47" data-line-number="47"></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="kw">str</span>(data)</a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">#&gt; 'data.frame':    32561 obs. of  15 variables:</span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">#&gt;  $ age           : num  39 50 38 53 28 37 49 52 31 42 ...</span></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="co">#&gt;  $ workclass     : num  8 7 5 5 5 5 5 7 5 5 ...</span></a>
<a class="sourceLine" id="cb5-52" data-line-number="52"><span class="co">#&gt;  $ fnlwgt        : num  77516 83311 215646 234721 338409 ...</span></a>
<a class="sourceLine" id="cb5-53" data-line-number="53"><span class="co">#&gt;  $ education     : num  10 10 12 2 10 13 7 12 13 10 ...</span></a>
<a class="sourceLine" id="cb5-54" data-line-number="54"><span class="co">#&gt;  $ education_num : num  13 13 9 7 13 14 5 9 14 13 ...</span></a>
<a class="sourceLine" id="cb5-55" data-line-number="55"><span class="co">#&gt;  $ marital_status: num  5 3 1 3 3 3 4 3 5 3 ...</span></a>
<a class="sourceLine" id="cb5-56" data-line-number="56"><span class="co">#&gt;  $ occupation    : num  2 5 7 7 11 5 9 5 11 5 ...</span></a>
<a class="sourceLine" id="cb5-57" data-line-number="57"><span class="co">#&gt;  $ relationship  : num  2 1 2 1 6 6 2 1 2 1 ...</span></a>
<a class="sourceLine" id="cb5-58" data-line-number="58"><span class="co">#&gt;  $ race          : num  5 5 5 3 3 5 3 5 5 5 ...</span></a>
<a class="sourceLine" id="cb5-59" data-line-number="59"><span class="co">#&gt;  $ sex           : num  2 2 2 2 1 1 1 2 1 2 ...</span></a>
<a class="sourceLine" id="cb5-60" data-line-number="60"><span class="co">#&gt;  $ capital_gain  : num  2174 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb5-61" data-line-number="61"><span class="co">#&gt;  $ capital_loss  : num  0 0 0 0 0 0 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb5-62" data-line-number="62"><span class="co">#&gt;  $ hours_week    : num  40 13 40 40 40 40 16 45 50 40 ...</span></a>
<a class="sourceLine" id="cb5-63" data-line-number="63"><span class="co">#&gt;  $ native_country: num  40 40 40 40 6 40 24 40 40 40 ...</span></a>
<a class="sourceLine" id="cb5-64" data-line-number="64"><span class="co">#&gt;  $ income        : num  1 1 1 1 1 1 1 2 2 2 ...</span></a></code></pre></div>
<p>Now we will check the income column.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># table of income</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">table</span>(data<span class="op">$</span>income)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;     1     2 </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 24720  7841</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="kw">round</span>(<span class="kw">prop.table</span>(<span class="kw">table</span>(data<span class="op">$</span>income))<span class="op">*</span><span class="dv">100</span>, <span class="dt">digits=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  1  2 </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 76 24</span></a></code></pre></div>
<p>The first table shows that 24,720 observations were 1, and 7,841 observations were 2. This means that 24,720 aduts had an income of 50k or less, while 7,841 adults had an income of more than 50k. The second table shows the percentages of each income type: 76% had an income of 50k or less and 24% had an income of more than 50k.</p>
</div>
<div id="machine-learning" class="section level3">
<h3>Machine learning</h3>
<p>Now we are ready to do machine learning. First we will assign each sample to either the training or the test set. About 70% of the observations are going to be in the training set and 30% are going to be in the test set.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># assign samples to training or test set</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">ind &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">2</span>, <span class="dt">size=</span><span class="kw">nrow</span>(data), <span class="dt">replace=</span>T, <span class="dt">prob=</span><span class="kw">c</span>(<span class="fl">0.7</span>, <span class="fl">0.3</span>))</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw">head</span>(ind, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;  [1] 1 1 1 1 2 1 1 1 1 1 1 1 1 2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 2 1 1 1 1 1 1 2 1 1</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; [39] 2 2 1 1 1 1 1 1 1 1 1 2</span></a></code></pre></div>
<p>Next we are going to create the training and test sets, based on the random assignments we just created.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># training set</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">data_training &lt;-<span class="st"> </span>data[ind<span class="op">==</span><span class="dv">1</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">15</span>]</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(data_training, <span class="dv">5</span>))</a></code></pre></div>
<table>
<colgroup>
<col width="1%"></col>
<col width="2%"></col>
<col width="6%"></col>
<col width="4%"></col>
<col width="6%"></col>
<col width="9%"></col>
<col width="9%"></col>
<col width="7%"></col>
<col width="8%"></col>
<col width="3%"></col>
<col width="2%"></col>
<col width="8%"></col>
<col width="8%"></col>
<col width="7%"></col>
<col width="9%"></col>
<col width="4%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">age</th>
<th align="right">workclass</th>
<th align="right">fnlwgt</th>
<th align="right">education</th>
<th align="right">education_num</th>
<th align="right">marital_status</th>
<th align="right">occupation</th>
<th align="right">relationship</th>
<th align="right">race</th>
<th align="right">sex</th>
<th align="right">capital_gain</th>
<th align="right">capital_loss</th>
<th align="right">hours_week</th>
<th align="right">native_country</th>
<th align="right">income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">39</td>
<td align="right">8</td>
<td align="right">77516</td>
<td align="right">10</td>
<td align="right">13</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">2174</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">50</td>
<td align="right">7</td>
<td align="right">83311</td>
<td align="right">10</td>
<td align="right">13</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="right">40</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">38</td>
<td align="right">5</td>
<td align="right">215646</td>
<td align="right">12</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">53</td>
<td align="right">5</td>
<td align="right">234721</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="right">37</td>
<td align="right">5</td>
<td align="right">284582</td>
<td align="right">13</td>
<td align="right">14</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># test set</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">data_test &lt;-<span class="st"> </span>data[ind<span class="op">==</span><span class="dv">2</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">15</span>]</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(data_test, <span class="dv">5</span>))</a></code></pre></div>
<table>
<colgroup>
<col width="1%"></col>
<col width="2%"></col>
<col width="6%"></col>
<col width="4%"></col>
<col width="6%"></col>
<col width="9%"></col>
<col width="9%"></col>
<col width="7%"></col>
<col width="8%"></col>
<col width="3%"></col>
<col width="2%"></col>
<col width="8%"></col>
<col width="8%"></col>
<col width="7%"></col>
<col width="9%"></col>
<col width="4%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">age</th>
<th align="right">workclass</th>
<th align="right">fnlwgt</th>
<th align="right">education</th>
<th align="right">education_num</th>
<th align="right">marital_status</th>
<th align="right">occupation</th>
<th align="right">relationship</th>
<th align="right">race</th>
<th align="right">sex</th>
<th align="right">capital_gain</th>
<th align="right">capital_loss</th>
<th align="right">hours_week</th>
<th align="right">native_country</th>
<th align="right">income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">5</td>
<td align="right">28</td>
<td align="right">5</td>
<td align="right">338409</td>
<td align="right">10</td>
<td align="right">13</td>
<td align="right">3</td>
<td align="right">11</td>
<td align="right">6</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">6</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="right">32</td>
<td align="right">5</td>
<td align="right">205019</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">5</td>
<td align="right">13</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">40</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">16</td>
<td align="right">34</td>
<td align="right">5</td>
<td align="right">245487</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">15</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">45</td>
<td align="right">27</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">26</td>
<td align="right">56</td>
<td align="right">3</td>
<td align="right">216851</td>
<td align="right">10</td>
<td align="right">13</td>
<td align="right">3</td>
<td align="right">14</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">28</td>
<td align="right">54</td>
<td align="right">1</td>
<td align="right">180211</td>
<td align="right">16</td>
<td align="right">10</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">60</td>
<td align="right">36</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>We will also make training and test labels, which are datasets with just the income column of the training and test datasets, respectively.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># data training labels</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">data_trainLabels &lt;-<span class="st"> </span>data[ind<span class="op">==</span><span class="dv">1</span>, <span class="dv">15</span>]</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">head</span>(data_trainLabels, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;  [1] 1 1 1 1 1 1 2 2 2 2 2 1 2 1 1 1 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; [39] 1 1 1 1 2 1 2 1 1 1 1 2</span></a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># data test labels</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">data_testLabels &lt;-<span class="st"> </span>data[ind<span class="op">==</span><span class="dv">2</span>, <span class="dv">15</span>]</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw">head</span>(data_testLabels, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt;  [1] 1 1 1 2 2 1 1 2 1 1 2 1 1 1 1 1 1 1 1 2 1 1 1 2 1 1 1 1 1 1 2 1 1 1 2 1 1 1</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; [39] 1 1 1 1 1 2 1 2 1 2 1 1</span></a></code></pre></div>
<p>Now the model can be built. This is just a single line of code.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># model</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">data_pred &lt;-<span class="st">  </span><span class="kw">knn</span>(<span class="dt">train=</span>data_training, <span class="dt">test=</span>data_test, <span class="dt">cl=</span>data_trainLabels, <span class="dt">k=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">head</span>(data_pred, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;  [1] 2 1 1 1 1 1 1 1 1 2 2 1 2 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; [39] 1 1 1 1 2 2 1 1 2 1 1 1</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; Levels: 1 2</span></a></code></pre></div>
<p>We can then combine the dataset with the new predictions for further analysis.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># merge model and data_testLabels</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">merge &lt;-<span class="st"> </span><span class="kw">data.frame</span>(data_testLabels, data_pred)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># column names for merge</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5">names &lt;-<span class="st"> </span><span class="kw">colnames</span>(data_test)</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co"># combine datasets</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">final_data &lt;-<span class="st"> </span><span class="kw">cbind</span>(data_test, merge)</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="kw">names</span>(final_data) &lt;-<span class="st"> </span><span class="kw">c</span>(names, <span class="st">&quot;observed_income&quot;</span>, <span class="st">&quot;predicted_income&quot;</span>)</a>
<a class="sourceLine" id="cb13-10" data-line-number="10"></a>
<a class="sourceLine" id="cb13-11" data-line-number="11">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(final_data, <span class="dv">10</span>))</a></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="1%"></col>
<col width="2%"></col>
<col width="5%"></col>
<col width="3%"></col>
<col width="5%"></col>
<col width="7%"></col>
<col width="7%"></col>
<col width="5%"></col>
<col width="6%"></col>
<col width="2%"></col>
<col width="2%"></col>
<col width="6%"></col>
<col width="6%"></col>
<col width="5%"></col>
<col width="7%"></col>
<col width="3%"></col>
<col width="8%"></col>
<col width="9%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">age</th>
<th align="right">workclass</th>
<th align="right">fnlwgt</th>
<th align="right">education</th>
<th align="right">education_num</th>
<th align="right">marital_status</th>
<th align="right">occupation</th>
<th align="right">relationship</th>
<th align="right">race</th>
<th align="right">sex</th>
<th align="right">capital_gain</th>
<th align="right">capital_loss</th>
<th align="right">hours_week</th>
<th align="right">native_country</th>
<th align="right">income</th>
<th align="right">observed_income</th>
<th align="left">predicted_income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">5</td>
<td align="right">28</td>
<td align="right">5</td>
<td align="right">338409</td>
<td align="right">10</td>
<td align="right">13</td>
<td align="right">3</td>
<td align="right">11</td>
<td align="right">6</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">6</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="right">32</td>
<td align="right">5</td>
<td align="right">205019</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">5</td>
<td align="right">13</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">40</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">16</td>
<td align="right">34</td>
<td align="right">5</td>
<td align="right">245487</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">15</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">45</td>
<td align="right">27</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">26</td>
<td align="right">56</td>
<td align="right">3</td>
<td align="right">216851</td>
<td align="right">10</td>
<td align="right">13</td>
<td align="right">3</td>
<td align="right">14</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">28</td>
<td align="right">54</td>
<td align="right">1</td>
<td align="right">180211</td>
<td align="right">16</td>
<td align="right">10</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">60</td>
<td align="right">36</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">29</td>
<td align="right">39</td>
<td align="right">5</td>
<td align="right">367260</td>
<td align="right">12</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">80</td>
<td align="right">40</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">36</td>
<td align="right">48</td>
<td align="right">5</td>
<td align="right">242406</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">34</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">39</td>
<td align="right">31</td>
<td align="right">5</td>
<td align="right">84154</td>
<td align="right">16</td>
<td align="right">10</td>
<td align="right">3</td>
<td align="right">13</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">38</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">40</td>
<td align="right">48</td>
<td align="right">7</td>
<td align="right">265477</td>
<td align="right">8</td>
<td align="right">12</td>
<td align="right">3</td>
<td align="right">11</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">50</td>
<td align="right">29</td>
<td align="right">5</td>
<td align="right">271466</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">5</td>
<td align="right">11</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">43</td>
<td align="right">40</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="results" class="section level2">
<h2>Results</h2>
<p>Using the CrossTable function, we can find out how accurate our classification algorithm was.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># crosstable</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">CrossTable</span>(<span class="dt">x=</span>data_testLabels, <span class="dt">y=</span>data_pred, <span class="dt">prop.chisq=</span>T)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;    Cell Contents</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; |-------------------------|</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; |                       N |</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; | Chi-square contribution |</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt; |           N / Row Total |</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt; |           N / Col Total |</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt; |         N / Table Total |</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; |-------------------------|</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; Total Observations in Table:  9759 </span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt;                 | data_pred </span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt; data_testLabels |         1 |         2 | Row Total | </span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt; ----------------|-----------|-----------|-----------|</span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt;               1 |      6517 |       918 |      7435 | </span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt;                 |    32.492 |   144.853 |           | </span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt;                 |     0.877 |     0.123 |     0.762 | </span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt;                 |     0.818 |     0.513 |           | </span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt;                 |     0.668 |     0.094 |           | </span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; ----------------|-----------|-----------|-----------|</span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co">#&gt;               2 |      1454 |       870 |      2324 | </span></a>
<a class="sourceLine" id="cb14-28" data-line-number="28"><span class="co">#&gt;                 |   103.951 |   463.418 |           | </span></a>
<a class="sourceLine" id="cb14-29" data-line-number="29"><span class="co">#&gt;                 |     0.626 |     0.374 |     0.238 | </span></a>
<a class="sourceLine" id="cb14-30" data-line-number="30"><span class="co">#&gt;                 |     0.182 |     0.487 |           | </span></a>
<a class="sourceLine" id="cb14-31" data-line-number="31"><span class="co">#&gt;                 |     0.149 |     0.089 |           | </span></a>
<a class="sourceLine" id="cb14-32" data-line-number="32"><span class="co">#&gt; ----------------|-----------|-----------|-----------|</span></a>
<a class="sourceLine" id="cb14-33" data-line-number="33"><span class="co">#&gt;    Column Total |      7971 |      1788 |      9759 | </span></a>
<a class="sourceLine" id="cb14-34" data-line-number="34"><span class="co">#&gt;                 |     0.817 |     0.183 |           | </span></a>
<a class="sourceLine" id="cb14-35" data-line-number="35"><span class="co">#&gt; ----------------|-----------|-----------|-----------|</span></a>
<a class="sourceLine" id="cb14-36" data-line-number="36"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-37" data-line-number="37"><span class="co">#&gt; </span></a></code></pre></div>
<p>The crosstable shows that 76.2% of actual observations were 1 (income of less than or equal to 50k) and 23.8% of actual observations were 2 (income of greater than 50k), as expected. The classification algorithm predicted that 81.7% of the observations were 1 and 23.8% of the observations were 2. How accurate was it? The algorithm correctly predicted 87.7% of the observations that were 1, but only 37.4% of the observations that were 2. 918 observations were predicted to be 2 but were actually 1, and 1,454 observations were predicted to be 1 but were actually 2. That means that 24.3% of the total observations were wrongly predicted and 75.7% of the observations were correctly predicted.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
